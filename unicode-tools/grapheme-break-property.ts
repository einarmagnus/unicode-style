
const cp = (s:string) => s.codePointAt(0)!;
const r = (a: number, b: number) => Array((b-a+1)).fill(0).map((_,i)=>i+a)
const strR = (rs: string) => {
  const range = [];
  const cps = [...rs];
  for (let i = 0; i < cps.length; i+=2) {
    range.push(r(cp(cps[i]), cp(cps[i+1])))
  }
  return range.flat();
}
const strToSet = (s: string, r: string) => {
  return [...s].map(c => cp(c))
  .concat(strR(r))
  .reduce((s, c) => s.add(c), new Set<number>());
}


export const graphemeBreakProp = {
  isPrepend: ((s: Set<number>) => (v: number) => s.has(v))(strToSet("ÛÜà£¢àµğ‘‚½ğ‘ƒğ‘‡‚ğ‘‡ƒğ‘¤¿ğ‘¥ğ‘¨ºğ‘µ†", "Ø€Ø…ğ‘ª„ğ‘ª‰")),
  isCR: (v:number) => (v === 0xd),
  isLF: (v:number) => (v === 0xa),
  isControl: ((s: Set<number>) => (v: number) => s.has(v))(strToSet("Â­Øœá â€‹â€â€ï»¿ï¿¹ï¿ºï¿»ó €", "\u{0}\u{9}\u{e}\u{1f}ÂŸ\u{2028}â€®â â¤â¦â¯ğ“°ğ“¸ğ›² ğ›²£ğ…³ğ…º")),
  isExtend: ((s: Set<number>) => (v: number) => s.has(v))(strToSet("Ö¿××‚×„×…×‡Ù°Û§Û¨Ü‘ß½à ¥à ¦à §à¡™à¡šà¡›à¤ºà¤¼à¥à¥¢à¥£à¦à¦¼à¦¾à§à§—à§¢à§£à§¾à¨à¨‚à¨¼à©à©‚à©‡à©ˆà©‹à©Œà©à©‘à©°à©±à©µàªàª‚àª¼à«‡à«ˆà«à«¢à«£à¬à¬¼à¬¾à¬¿à­à­•à­–à­—à­¢à­£à®‚à®¾à¯€à¯à¯—à°€à°„à°¾à°¿à±€à±†à±‡à±ˆà±•à±–à±¢à±£à²à²¼à²¿à³‚à³†à³Œà³à³•à³–à³¢à³£à´€à´à´»à´¼à´¾àµàµ—àµ¢àµ£à¶à·Šà·à·’à·“à·”à·–à·Ÿà¸±àº±à¼˜à¼™à¼µà¼·à¼¹à¾†à¾‡à¿†á€¹á€ºá€½á€¾á˜á™ááŸá á‚‚á‚…á‚†á‚á‚áááŸáœ’áœ“áœ”áœ²áœ³áœ´á’á“á²á³á´áµáŸ†áŸá ‹á Œá á¢…á¢†á¢©á¤ á¤¡á¤¢á¤§á¤¨á¤²á¤¹á¤ºá¤»á¨—á¨˜á¨›á©–á© á©¢á©¿á¬¼á­‚á®€á®á®¨á®©á®«á®¬á®­á¯¦á¯¨á¯©á¯­á¯¯á¯°á¯±á°¶á°·á³á³‘á³’á³­á³´á³¸á³¹â€Œâ³¯â³°â³±âµ¿ã‚™ã‚šêšêšŸê›°ê›±ê ‚ê †ê ‹ê ¥ê ¦ê ¬ê£„ê£…ê£¿ê¦€ê¦ê¦‚ê¦³ê¦¼ê¦½ê§¥ê¨±ê¨²ê¨µê¨¶ê©ƒê©Œê©¼êª°êª²êª³êª´êª·êª¸êª¾êª¿ê«ê«¬ê«­ê«¶ê¯¥ê¯¨ê¯­ï¬ï¾ï¾Ÿğ‡½ğ‹ ğ¨ğ¨‚ğ¨ƒğ¨…ğ¨†ğ¨¸ğ¨¹ğ¨ºğ¨¿ğ«¥ğ«¦ğº«ğº¬ğ‘€ğ‘¿ğ‘‚€ğ‘‚ğ‘‚¹ğ‘‚ºğ‘„€ğ‘„ğ‘„‚ğ‘…³ğ‘†€ğ‘†ğ‘‡ğ‘ˆ¯ğ‘ˆ°ğ‘ˆ±ğ‘ˆ´ğ‘ˆ¶ğ‘ˆ·ğ‘ˆ¾ğ‘‹Ÿğ‘Œ€ğ‘Œğ‘Œ»ğ‘Œ¼ğ‘Œ¾ğ‘€ğ‘—ğ‘‘‚ğ‘‘ƒğ‘‘„ğ‘‘†ğ‘‘ğ‘’°ğ‘’ºğ‘’½ğ‘’¿ğ‘“€ğ‘“‚ğ‘“ƒğ‘–¯ğ‘–¼ğ‘–½ğ‘–¿ğ‘—€ğ‘—œğ‘—ğ‘˜½ğ‘˜¿ğ‘™€ğ‘š«ğ‘š­ğ‘š·ğ‘œğ‘œğ‘œŸğ‘ ¹ğ‘ ºğ‘¤°ğ‘¤»ğ‘¤¼ğ‘¤¾ğ‘¥ƒğ‘§šğ‘§›ğ‘§ ğ‘©‡ğ‘©™ğ‘©šğ‘©›ğ‘ª˜ğ‘ª™ğ‘°¿ğ‘²²ğ‘²³ğ‘²µğ‘²¶ğ‘´ºğ‘´¼ğ‘´½ğ‘µ‡ğ‘¶ğ‘¶‘ğ‘¶•ğ‘¶—ğ‘»³ğ‘»´ğ–½ğ–¿¤ğ›²ğ›²ğ…¥ğ…§ğ…¨ğ…©ğ‰‚ğ‰ƒğ‰„ğ©µğª„ğ€£ğ€¤", "Ì€Í¯ÒƒÒ‰Ö‘Ö½ØØšÙ‹ÙŸÛ–ÛœÛŸÛ¤ÛªÛ­Ü°İŠŞ¦Ş°ß«ß³à –à ™à ›à £à ©à ­à£“à£¡à££à¤‚à¥à¥ˆà¥‘à¥—à§à§„à«à«…à«ºà«¿à­à­„à±Šà±àµàµ„à¸´à¸ºà¹‡à¹àº´àº¼à»ˆà»à½±à½¾à¾€à¾„à¾à¾—à¾™à¾¼á€­á€°á€²á€·á±á´á·á½áŸ‰áŸ“á©˜á©á©¥á©¬á©³á©¼áª°á«€á¬€á¬ƒá¬´á¬ºá­«á­³á®¢á®¥á°¬á°³á³”á³ á³¢á³¨á·€á·¹á·»á·¿âƒâƒ°â· â·¿ã€ªã€¯ê™¯ê™²ê™´ê™½ê£ ê£±ê¤¦ê¤­ê¥‡ê¥‘ê¦¶ê¦¹ê¨©ê¨®ï¸€ï¸ï¸ ï¸¯ğ¶ğºğ¨Œğ¨ğ´¤ğ´§ğ½†ğ½ğ‘€¸ğ‘†ğ‘‚³ğ‘‚¶ğ‘„§ğ‘„«ğ‘„­ğ‘„´ğ‘†¶ğ‘†¾ğ‘‡‰ğ‘‡Œğ‘‹£ğ‘‹ªğ‘¦ğ‘¬ğ‘°ğ‘´ğ‘¸ğ‘¿ğ‘’³ğ‘’¸ğ‘–²ğ‘–µğ‘˜³ğ‘˜ºğ‘š°ğ‘šµğ‘œ¢ğ‘œ¥ğ‘œ§ğ‘œ«ğ‘ ¯ğ‘ ·ğ‘§”ğ‘§—ğ‘¨ğ‘¨Šğ‘¨³ğ‘¨¸ğ‘¨»ğ‘¨¾ğ‘©‘ğ‘©–ğ‘ªŠğ‘ª–ğ‘°°ğ‘°¶ğ‘°¸ğ‘°½ğ‘²’ğ‘²§ğ‘²ªğ‘²°ğ‘´±ğ‘´¶ğ‘´¿ğ‘µ…ğ–«°ğ–«´ğ–¬°ğ–¬¶ğ–¾ğ–¾’ğ…®ğ…²ğ…»ğ†‚ğ†…ğ†‹ğ†ªğ†­ğ¨€ğ¨¶ğ¨»ğ©¬ğª›ğªŸğª¡ğª¯ğ€€ğ€†ğ€ˆğ€˜ğ€›ğ€¡ğ€¦ğ€ªğ„°ğ„¶ğ‹¬ğ‹¯ğ£ğ£–ğ¥„ğ¥ŠğŸ»ğŸ¿ó € ó ¿ó „€ó ‡¯")),
  isRegionalIndicator: (v: number) => (v >= 0x1f1e6 && v <= 0x1f1ff),
  isSpacingMark: ((s: Set<number>) => (v: number) => s.has(v))(strToSet("à¤ƒà¤»à¤¾à¤¿à¥€à¥à¥à¦‚à¦ƒà¦¿à§€à§‡à§ˆà§‹à§Œà¨ƒà¨¾à¨¿à©€àªƒàª¾àª¿à«€à«‰à«‹à«Œà¬‚à¬ƒà­€à­‡à­ˆà­‹à­Œà®¿à¯à¯‚à¯†à¯‡à¯ˆà¯Šà¯‹à¯Œà°à°‚à°ƒà²‚à²ƒà²¾à³€à³à³ƒà³„à³‡à³ˆà³Šà³‹à´‚à´ƒà´¿àµ€àµ†àµ‡àµˆàµŠàµ‹àµŒà¶‚à¶ƒà·à·‘à·²à·³à¸³àº³à¼¾à¼¿à½¿á€±á€»á€¼á–á—á‚„á¶áŸ‡áŸˆá¤©á¤ªá¤«á¤°á¤±á¨™á¨šá©•á©—á¬„á¬»á­ƒá­„á®‚á®¡á®¦á®§á®ªá¯§á¯ªá¯«á¯¬á¯®á¯²á¯³á°´á°µá³¡á³·ê £ê ¤ê §ê¢€ê¢ê¥’ê¥“ê¦ƒê¦´ê¦µê¦ºê¦»ê¦¾ê¦¿ê§€ê¨¯ê¨°ê¨³ê¨´ê©ê««ê«®ê«¯ê«µê¯£ê¯¤ê¯¦ê¯§ê¯©ê¯ªê¯¬ğ‘€€ğ‘€‚ğ‘‚‚ğ‘‚°ğ‘‚±ğ‘‚²ğ‘‚·ğ‘‚¸ğ‘„¬ğ‘……ğ‘…†ğ‘†‚ğ‘†³ğ‘†´ğ‘†µğ‘†¿ğ‘‡€ğ‘‡ğ‘ˆ¬ğ‘ˆ­ğ‘ˆ®ğ‘ˆ²ğ‘ˆ³ğ‘ˆµğ‘‹ ğ‘‹¡ğ‘‹¢ğ‘Œ‚ğ‘Œƒğ‘Œ¿ğ‘‡ğ‘ˆğ‘‹ğ‘Œğ‘ğ‘¢ğ‘£ğ‘µğ‘¶ğ‘·ğ‘‘€ğ‘‘ğ‘‘…ğ‘’±ğ‘’²ğ‘’¹ğ‘’»ğ‘’¼ğ‘’¾ğ‘“ğ‘–°ğ‘–±ğ‘–¾ğ‘˜°ğ‘˜±ğ‘˜²ğ‘˜»ğ‘˜¼ğ‘˜¾ğ‘š¬ğ‘š®ğ‘š¯ğ‘š¶ğ‘œ ğ‘œ¡ğ‘œ¦ğ‘ ¬ğ‘ ­ğ‘ ®ğ‘ ¸ğ‘¤·ğ‘¤¸ğ‘¤½ğ‘¥€ğ‘¥‚ğ‘§‘ğ‘§’ğ‘§“ğ‘§¤ğ‘¨¹ğ‘©—ğ‘©˜ğ‘ª—ğ‘°¯ğ‘°¾ğ‘²©ğ‘²±ğ‘²´ğ‘¶“ğ‘¶”ğ‘¶–ğ‘»µğ‘»¶ğ–¿°ğ–¿±ğ…¦ğ…­", "à¥‰à¥Œà±à±„à·˜à·á¾áŸ…á¤£á¤¦á¤³á¤¸á©­á©²á¬½á­á°¤á°«ê¢´ê£ƒğ‘ğ‘„ğ‘–¸ğ‘–»ğ‘¤±ğ‘¤µğ‘§œğ‘§Ÿğ‘¶Šğ‘¶ğ–½‘ğ–¾‡")),
  isL: (v: number) => (v >= 0x1100 && v <= 0x115f) || (v >= 0xa960 && v <= 0xa97c),
  isV: (v: number) => (v >= 0x1160 && v <= 0x11a7) || (v >= 0xd7b0 && v <= 0xd7c6),
  isT: (v: number) => (v >= 0x11a8 && v <= 0x11ff) || (v >= 0xd7cb && v <= 0xd7fb),
  // shorter (and faster!) than the whole table (399 entries)
  isLV: (v: number) => (v >= 0xac00 && v <= 0xd7a3) && ((v-0xac00) % 28 === 0),
  // shorter (and faster!) than the whole table (10773 entries)
  isLVT: (v: number) => (v >= 0xac00 && v <= 0xd7a3) && ((v-0xac00) % 28 !== 0),
  isZWJ: (v:number) => (v === 0x200d),
  // from emoji-data.txt, needed for rule http://unicode.org/reports/tr29/#GB11
  isExtendedPictographic: ((s: Set<number>) => (v: number) => s.has(v))(strToSet("Â©Â®â€¼â‰â„¢â„¹â†©â†ªâŒšâŒ›âŒ¨âˆââ¸â¹âºâ“‚â–ªâ–«â–¶â—€âœ”âœ–âœâœ¡âœ¨âœ³âœ´â„â‡âŒââ“â”â•â—â•â–â—â¡â°â¿â¤´â¤µâ¬…â¬†â¬‡â¬›â¬œâ­â­•ã€°ã€½ãŠ—ãŠ™ğŸ„ğŸ„ğŸ„ğŸ„¯ğŸ…¾ğŸ…¿ğŸ†ğŸˆğŸˆ‚ğŸˆšğŸˆ¯ğŸ‰ğŸ‰‘ğŸ©¸ğŸ©¹ğŸ©ºğŸ«€ğŸ«ğŸ«‚", "â†”â†™â©â³â—»â—¾â˜€â˜…â˜‡â˜’â˜”âš…âšâœ…âœˆâœ’â£â§ğŸ€€ğŸƒğŸ…¬ğŸ…±ğŸ†‘ğŸ†šğŸˆ²ğŸˆºğŸŒ€ğŸºğŸ€ğŸ”½ğŸ•†ğŸ™ğŸš€ğŸ›—ğŸ› ğŸ›¬ğŸ›°ğŸ›¼ğŸŸ ğŸŸ«ğŸ¤ŒğŸ¤ºğŸ¤¼ğŸ¥…ğŸ¥‡ğŸ¥¸ğŸ¥ºğŸ§‹ğŸ§ğŸ§¿ğŸ©°ğŸ©´ğŸª€ğŸª†ğŸªğŸª¨ğŸª°ğŸª¶ğŸ«ğŸ«–")),
}
